<div class="section-header">
  <h1>New user</h1>
</div>


<div class="form">
  <%= form_for(@user) do |f| %>
      <%= render 'fields', f: f %>

      <div>
        <div class='' style="margin-top: 15px;">
          <div class='inline-block'>

            <input type="checkbox" id="autogenerate_password" name="use_generated_password"
                   class="feature-update-field align-top"
                   style="margin-top: 15px;"
                   checked>

            <p class='job-field-title inline-block push-right-small' style="width: 200px;">Use Auto-Generated
              Password</p>

            <div class="inline-block" id="password_show_block">
              <div class="inline-block">
                <a class="inline-block align-top" id="show_password" style="color: #BFE9CF; margin-top: 15px; margin-left: 30px; cursor: hand;">Show
                  Password</a>
              </div>

              <div class='hidden push-right' id="password_block">
                <p class='job-field-title align-top push-up' style="width: auto; min-width: 0px; height: auto;">User
                  Password: </p>

                <%= hidden_field_tag "generated_password", {}, id: "generated_password", name: "generated_password", value: @autogenerated_password %>
                <div class="inline-block align-top push-right-small" style="font-family: orgonboldregular; font-size: 14px; margin-top: 15px; color: #FFF;"><%= @autogenerated_password %></div>
              </div>
            </div>

          </div>

          <div id="custom_password_block" class="hidden">

            <div class="push-down">
              <div class='job-field-title inline-block'>Set Password</div>
              <%= text_field_tag "custom_password", nil, placeholder: "Password",
                                 class: "job-field-value-editable tooltip-info",
                               "data-placement" => "bottom",
                               "data-title" => "Set Password" %>
            </div>

          </div>

        </div>
      </div>

      <div class="divider divider-md"></div>

      <br>

      <%= link_to button_tag("Cancel", class: "btn btn-sub push-left-small tooltip-info", "data-title" => "Cancel edit and go back", :type => 'button'), :back %>

      <%= f.submit "Create User", class: "btn btn-primary tooltip-info form-loading-on-click",
                   "data-title" => "Create and save new user"
      %>

      <% if false %>
          <div class="alert pull-right push-down inline">
            <%= f.check_box :admin %>
            Admin Account
          </div>
      <% end %>
  <% end %>
</div>
<div class="remote-loading hidden" style="margin-top: 30px;">
  <%= render "layouts/inline_loading", title: "Creating user, please wait" %>
</div>

<script type="text/javascript">
    (function ($) {
        $(document).ready(function () {
            $('#show_password').click(function () {
                $("#password_block").removeClass("hidden");
                $('#show_password').addClass("hidden");
            });

            $('#autogenerate_password').change(function() {
                if((this).checked) {
                    $("#custom_password_block").addClass("hidden");
                    $("#password_show_block").removeClass("hidden");
                }
                else {
                    $("#custom_password_block").removeClass("hidden");
                    $("#password_show_block").addClass("hidden");
                }

            });

        });
    }(jQuery));
</script>
